








<div x-data="categoryFilter()" x-init="initCategFilter()">
  <div class="container-fluid term-nav" id="">
    <div class="term-nav--block px-3 py-3">
      <div class="row">
        <div class="col-12">
          <h1>{{ .Title }}</h1>
          <p>Click on your state / province / country below. If your state / province / country isn't listed, then we don't yet
            have any bisexuality-aware professionals listed there in this category.</p>

            <button @click="dataReady = !dataReady">Switch view

              <span x-text="dataReady"></span>
            </button>
        </div>
      </div>
    </div>
  </div>


  <!-- HUOGO CONTENT -->
  {{ $term := .Title }}
  {{ $pages := where .Site.RegularPages "Params.categories" $term }}
  
  <!-- Ensure there are pages to paginate -->
  <div class="container" id="inlineEntryies" x-show="!dataReady">
    {{ if gt (len $pages) 0 }}
    {{ $paginator := .Paginate $pages }}
    {{ range $paginator.Pages.GroupByParam "categories" }}
    <ul class="list-unstyled">
      {{ range .Pages }}
      {{ partial "entry-card.html" . }}
      {{ end }}
    </ul>
    {{ end }}
    
    <div class="max-w-64rem mx-auto">
      {{ template "_internal/pagination.html" . }}
    </div>
    {{ else }}
    <p>No pages found.</p>
    {{ end }}
  </div>
  
  
  <!-- FILTERED CONTENT -->
  <div class="container" x-show="dataReady">

    <div class="max-w-64rem mx-auto d-flex w-100 justify-content-between gap-2 pb-2">
      
      <div class="flex-grow-1">
        <label for="location">Location:</label>
        <select id="location" x-ref="locationSelect" x-model="selectedLocation">
          <option value="">All</option>
          <template x-for="location in locationCounts" :key="location.value">
            <option
              :value="location.value"
              x-text="`${location.label} (${location.count})`"
            ></option>
          </template>
        </select>
      </div>
      <div class="d-flex flex-column">
        <label for="limit">Entries to Load:</label>
        <select id="limit" x-model="limit" @change="filterEntries" class="form-select form-select-lg" aria-label="30">
          <option value="30">30</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>
      </div>
    </div>
  </div>
  <div class="container" x-show="dataReady">
    <ul class="list-unstyled">
      <template x-for="entry in paginatedEntries" :key="entry.id">
        <li class="entry-card" :id="'entry-' + entry.id">
          <div class="card mb-3 px-3 py-3">
            <div class="card--head">
              <div class="d-flex justify-content-between">
                <div
                  class="me-3 entry-card--initial"
                  :class="'entry-card--initial__'+ entry.title[0].toLowerCase()"
                >
                  <span x-text="entry.title[0]" :title="entry.id"> </span>
                </div>

                <div class="flex-grow-1">
                  <h4 class="h5 entry-card--title mb-0">
                    <a href="" x-text="entry.title"> </a>
                  </h4>

                  <template x-if="entry.job_title">

                    <i class="entry-card--jobTitle"
                      x-text="entry.job_title + ' ' + entry.company + ' - (at ' + entry.company + ')'"
                      >
                      
                    </i>
                  </template>
                  <template x-if="!entry.job_title">
                    <i class="entry-card--jobTitle"
                      x-text="entry.job_title + ' ' + entry.company + ' - (at ' + entry.company + ')'"
                      >
                  </template>
                </div>

              </div>
              <span x-text="entry.title"></span>
            </div>
          </div>
        </li>
      </template>
    </ul>
  </div>
  <div class="container">
    <div class="max-w-64rem mx-auto">

      <button class="btn btn-link" @click="loadMore" x-show="canLoadMore">Load More</button>
    </div>
  </div>
</div>
